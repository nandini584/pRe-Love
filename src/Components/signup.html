<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up pRe-Love </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/5a360170f9.js" crossorigin="anonymous"></script>
</head>

<body class="m-0 p-0" style="font-family: 'Ubuntu', sans-serif;">

    <div class="page flex justify-center items-center h-screen"
        style="background: url('./bg.jpeg') no-repeat center center/cover;">

        <div id="formdiv"
            class="drop-shadow-2xl flex flex-col justify-center items-center w-[23rem] md:w-[28rem] lg:w-[32rem]  rounded-[35px] bg-gray-100 ">

            <img src="./logo.jpg" alt="pRe-Love"
                class="w-24 h-24 rounded-[40%] sm:w-26 sm:h-26 lg:w-35 lg:h-35 p-1 mt-2 -mb-1 ">
            <h1 class="my-2   text-[2rem] lg:text-[2.5rem]">Sign up</h1>

            <form action="/backend.js" name="form" id="form" onsubmit="return validateForm()"
                class="form  flex flex-col relative bottom-5 w-[280px] md:w-[300px] lg:w-[350px]" method="post">

                <input type="text" name="name" id="name" placeholder="Name"
                    class="text-xs sm:text-sm md:text-md px-2 py-1 ml-0 border-b-2 border-b-gray-400 w-full m-4 h-8  hover:border-b-2 hover:border-b-blue-700 focus:outline-none focus:border-blue-700 focus:bg-blue-100 transition-colors duration-500 hover:rounded-md focus:rounded-md bg-gray-100  "
                    required>
                <div class="formError ml-3 text-[0.65rem] -mt-4 text-red-500 h-2"></div>

                <input type="text" name="username" id="username" placeholder="Username"
                    class="text-xs sm:text-sm md:text-md px-2 py-1 ml-0 border-b-2  border-b-gray-400 m-4 h-8 w-full hover:border-b-2 hover:border-b-blue-700 focus:outline-none focus:border-blue-700 focus:bg-blue-100 transition-colors duration-500 hover:rounded-md focus:rounded-md bg-gray-100 "
                    required>
                <div class="formError ml-3 -mt-4 text-[0.65rem] text-red-500 h-2"></div>

                <input type="email" name="email" id="email" placeholder="E-mail"
                    class="text-xs sm:text-sm md:text-md px-2 py-1 ml-0 border-b-2 border-b-gray-400 w-full m-4 h-8 hover:border-b-2 hover:border-b-blue-700 focus:outline-none focus:border-blue-700 focus:bg-blue-100 transition-colors duration-500 hover:rounded-md focus:rounded-md bg-gray-100  "
                    required>
                <div class="formError ml-3 -mt-4 text-[0.65rem] text-red-500 h-2"></div>

                <input type="tel" name="phone" id="phone" placeholder="Mobile No."
                    class="text-xs sm:text-sm md:text-md px-2 py-1 ml-0 border-b-2 border-b-gray-400 w-full m-4 h-8 hover:border-b-2 hover:border-b-blue-700 focus:outline-none focus:border-blue-700 focus:bg-blue-100 transition-colors duration-500 hover:rounded-md focus:rounded-md bg-gray-100  "
                    required>
                <div class="formError ml-3 -mt-4 text-xs text-red-500 h-2"></div>

                <div
                    class="pwd flex items-center border-b-2 border-b-gray-400 focus:bg-blue-100 transition-colors duration-500 hover:rounded-md hover:border-b-blue-700">
                    <input type="password" name="password" id="password" placeholder="Create Password"
                        class="text-xs sm:text-sm md:text-md px-2 py-1 ml-0 mb-0 pb-0 border-b-2 m-4 h-8 w-[100%] focus:outline-none bg-gray-100 "
                        required>
                    <i class="fas fa-eye-slash text-lg relative top-2 right-2 z-10" id="eye1"></i>
                </div>
                <div class="formError ml-3 text-[0.65rem] text-red-500 h-2"></div>

                <div
                    class="pwd flex items-center border-b-2 border-b-gray-400 focus:bg-blue-100 transition-colors duration-500 hover:rounded-md hover:border-b-blue-700 relative mt-1">
                    <input type="password" name="cpwd" id="cpwd" placeholder="Confirm Password"
                        class="text-xs sm:text-sm md:text-md px-2 py-1 ml-0 mb-0 pb-0 border-b-2 m-4 h-8 w-[100%] focus:outline-none bg-gray-100 "
                        required>
                    <i class="fas fa-eye-slash text-lg relative top-2 right-2 z-10" id="eye2"></i>
                </div>
                <div class="formError ml-3 text-[0.65rem] text-red-500 h-2"></div>

                <div id="checkbox" class="mt-6">
                    <span id="alert" class="m-1 -pr-2 rounded-md">
                        <input type="checkbox" name="terms" id="terms"
                            class="w-5 m-0 relative left-[1.5px] top-[0.5px]">
                    </span>
                    <span class="text-xs">
                        I agree to
                        the <a href="/terms" class="text-blue-500 underline">Terms and Conditions</a>
                    </span>
                </div>
                <button type="submit"
                    class="m-5 mb-7 w-[150px] px-4 pt-1 pb-2 outline-none shadow-md shadow-gray-500 cursor-pointer relative left-14 lg:left-20 rounded-xl hover:scale-110 transition-transform duration-500 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white">Sign
                    Up
                </button>

            </form>

            <hr class="border-2 border-gray-200 w-[80%] relative bottom-8">
            <p class="text-xs relative bottom-6">Already have an account? <a href="./login.html"
                    class="text-blue-500  ">Login</a> </p>
        </div>
    </div>

    <script>
        let errors = 0;
        let pwd = document.getElementById("password");
        let cpwd = document.getElementById("cpwd");
        pwd.type = "password";
        cpwd.type = "password";

        let eye1 = document.getElementById("eye1");
        eye1.addEventListener("click", () => {
            if (pwd.type == "password") {
                pwd.type = "text";
                eye1.classList.remove("fas", "fa-eye-slash");
                eye1.classList.add("fas", "fa-eye");
            }
            else {
                pwd.type = "password";
                eye1.classList.remove("fas", "fa-eye");
                eye1.classList.add("fas", "fa-eye-slash");
            }

        })

        let eye2 = document.getElementById("eye2");
        eye2.addEventListener("click", () => {
            if (cpwd.type == "password") {
                cpwd.type = "text";
                eye2.classList.remove("fas", "fa-eye-slash");
                eye2.classList.add("fas", "fa-eye");
            }
            else {
                cpwd.type = "password";
                eye2.classList.remove("fas", "fa-eye");
                eye2.classList.add("fas", "fa-eye-slash");
            }

        })
        function clearErrors() {
            let error = document.getElementsByClassName("formError");
            for (let errors of error) {
                errors.innerHTML = "";
            }
            errors=0;
        }
        function seterror(i, err) {
            document.getElementsByClassName('formError')[i].innerHTML = err;
        }


        function validateForm() {
            let returnval = true;
            clearErrors();

            let name = document.forms["form"]["name"].value;
            let pattname = /[A-Za-z]/gi;
            let pattnum = /[0-9]/gi;
            if (name.match(pattname) == null) {
                seterror(0, "*Name can't be empty!");
                returnval = false;
                errors++;
            }
            if (name.match(pattnum) != null) {
                seterror(0, "*Name can't contain numbers!");
                returnval = false;
                errors++;
            }

            let username = document.forms["form"]["username"].value;
            let unamepatt = /[^\w]/g;
            if (username.match(unamepatt) != null) {
                seterror(1, "Username can only contain numbers, alphabet and underscore(_)");
                returnval = false;
                errors++;
            }

            let phone = document.forms["form"]["phone"].value;
            let pattphone = /[^0-9]/gi;
            if (phone.match(pattphone) != null) {
                seterror(3, "*Mobile number should only contain numeric values!");
                returnval = false;
                errors++;
            }
            else if (phone.length != 10) {
                seterror(3, "*Mobile no. should contain 10 digits!");
                returnval = false;
                errors++;
            }

            let pwdvalue = document.forms["form"]["password"].value;
            let cpwdvalue = document.forms["form"]["cpwd"].value;
            let pwdinput = document.getElementById("password");
            let pwdspecial = /[^A-Za-z0-9]/g;
            let pwdcap = /[A-Z]/g;
            let pwdsmall = /[a-z]/g;
            let pwdnum = /[0-9]/g;
            if (pwd.length < 8) {
                seterror(4, "*Password should contain atleast 8 digits!");
                returnval = false;
                errors++;
            }
            else if (((pwdnum.test(pwdvalue)) && (pwdspecial.test(pwdvalue)) && (pwdcap.test(pwdvalue)) && (pwdsmall.test(pwdvalue))) == false) {
                seterror(4, "*Password must have atleast one special character, one uppercase, one lowercase and one numeric !");
                returnval = false;
                errors++;
            }

            
            if (pwdvalue != cpwdvalue) {
                seterror(5, "*Passwords don't match!");
                returnval = false;
                errors++;
            }

            let check = document.forms["form"]["terms"].checked;
            let termbox = document.getElementById("terms");
            let box = document.getElementById("alert");
            if (check == false && errors == 0) {
                box.classList.add("border-2", "border-red-600");
                alert("Please agree to the Terms and Conditions");
                returnval = false;
            }
            else {
                box.classList.remove("border-2", "border-red-600");
            }
            return returnval
        }
    </script>
</body>

</html>